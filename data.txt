create table users (
	id serial,
	name varchar(50) not null,
	last_name varchar(50) not null, 
	email varchar(50),
	password int not null
)

alter table users
alter column password type varchar(256)

create table restaurants (
	id serial,
	name varchar(50) not null,
	address varchar(50) not null, 
	latitude bigint,
	longitude bigint,
	phone int,
	city varchar(50),
	range int
)

alter table restaurants
alter column latitude type varchar(256);
alter table restaurants
alter column longitude type varchar(256);

update restaurants
set latitude='43.86442', longitude='18.41486'
where name = '4 Sobe Gospodje Safije';

update restaurants
set latitude='43.85921', longitude='18.42087'
where name = 'Blind Tiger';
 
update restaurants
set latitude='43.85522', longitude='18.41619'
where name = 'Vinoteka';

update restaurants
set latitude='43.85864', longitude='18.43435'
where name = 'Inat Kuća';

update restaurants
set latitude='43.85646', longitude='18.40543'
where name = 'Vapiano';

update restaurants
set latitude='43.85872', longitude='18.41759'
where name = 'Gastro Pub Vučko';

update restaurants
set latitude='43.85374', longitude='18.43641'
where name = 'Park Prinčeva';

update restaurants
set latitude='43.86045', longitude='18.41163'
where name = 'Kod Dvije Domaćice';

create table food_types (
	id serial,
	type varchar(50)
);


insert into food_types (type) values ('Local Cuisine');
insert into food_types (type) values ('Vegan Options');
insert into food_types (type) values ('International Cuisine');
insert into food_types (type) values ('French Cuisine');
insert into food_types (type) values ('Italian Cuisine');
insert into food_types (type) values ('American Cuisine');
insert into food_types (type) values ('French Cuisine');


create table restaurant_types (
	id serial,
	type varchar(50)
);

alter table restaurants
add column restaurant_type integer;

ALTER TABLE restaurants
ADD FOREIGN KEY (restaurant_type) REFERENCES restaurant_types(id);

create table roles (
	id serial,
	role varchar(50) not null
);

insert into roles (role) values ('Administrator');
insert into roles (role) values ('Restaurant Administrator');
insert into roles (role) values ('Customer');
insert into roles (role) values ('Deliverer');

create table lk_user_role (
	id_user int,
	id_role int
);
ALTER TABLE lk_user_role
ADD FOREIGN KEY (id_user) REFERENCES users(id);
ALTER TABLE lk_user_role
ADD FOREIGN KEY (id_role) REFERENCES roles(id);

create table lk_employment (
	id_user int,
	id_restaurant int
);

ALTER TABLE lk_employment
ADD FOREIGN KEY (id_user) REFERENCES users(id);
ALTER TABLE lk_employment
ADD FOREIGN KEY (id_restaurant) REFERENCES restaurants(id);

create table lk_restaurant_review (
	id_user int,
	id_restaurant int
);

ALTER TABLE lk_restaurant_review
ADD FOREIGN KEY (id_user) REFERENCES users(id);
ALTER TABLE lk_employment
ADD FOREIGN KEY (id_restaurant) REFERENCES restaurants(id);

create table lk_restaurant_food (
	id_restaurant int,
	id_food int,
	delivery_time int
);

ALTER TABLE lk_restaurant_food
ADD FOREIGN KEY (id_restaurant) REFERENCES restaurants(id);
ALTER TABLE lk_restaurant_food
ADD FOREIGN KEY (id_food) REFERENCES food_types(id);

delete from food_types;

select * from food_types;
delete from food_types;

select type from food_types where id in 
(select id_food from lk_restaurant_food where id_restaurant in 
(select id from restaurants where name = 'Blind Tiger'));

insert into food_types (type) values ('pasta');
insert into food_types (type) values ('piletina');
insert into food_types (type) values ('cevapi');
insert into food_types (type) values ('pita');
insert into food_types (type) values ('pomfrit');
insert into food_types (type) values ('pica');




select * from lk_restaurant_food;
insert into lk_restaurant_food (id_restaurant, id_food) values (1,8);
insert into lk_restaurant_food(id_restaurant, id_food) values (1,9);
insert into lk_restaurant_food(id_restaurant, id_food) values (1,10);
insert into lk_restaurant_food(id_restaurant, id_food) values (2,11);
insert into lk_restaurant_food(id_restaurant, id_food) values (2,9);
insert into lk_restaurant_food(id_restaurant, id_food) values (2,12);

